(this["webpackJsonprecipe-contacts"]=this["webpackJsonprecipe-contacts"]||[]).push([[0],{15:function(e,t,n){},18:function(e,t,n){},2:function(e,t,n){e.exports={grid:"preview_styles_grid__1XMHs",row:"preview_styles_row__2fsI7",header:"preview_styles_header__32QiA",oddRow:"preview_styles_oddRow__k7ReU",evenRow:"preview_styles_evenRow__1nBTW",firstCell:"preview_styles_firstCell__1lsWo",lastCell:"preview_styles_lastCell__36OfD",rightAligned:"preview_styles_rightAligned__OARq-"}},20:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(7),s=n.n(r),o=(n(15),n(3)),i=n.n(o),u=n(4),d=n(5),l=n(2),f=n.n(l),h=n(1),w=function(e){var t=e.data.map((function(e,t){var n="".concat(0==t?"".concat(f.a.row," ").concat(f.a.header):""),a="".concat(f.a.row," ").concat(t%2==0?f.a.evenRow:f.a.oddRow);return e.map((function(c,r){var s,o="".concat(0==(s=r)?f.a.firstCell:""," ").concat(s==e.length-1?f.a.lastCell:""),i=function(e){return"".concat(e>=4?f.a.rightAligned:"")}(r),u="".concat(n," ").concat(a," ").concat(o," ").concat(i),d="".concat(n," ").concat(i," ").concat(o),l=0==t?d:u;return Object(h.jsx)("div",{style:{gridColumn:r+1},className:l,children:c},r)}))}));return Object(h.jsx)("div",{className:f.a.grid,children:t})},p=function(e){var t=e.data;return Object(h.jsxs)(c.a.Fragment,{children:[Object(h.jsxs)("p",{className:f.a.p,children:["The ",Object(h.jsx)("strong",{children:"Contacts"})," from the CRM has been synced! See a preview of the data below."]}),Object(h.jsx)("div",{style:{padding:"2rem"},children:Object(h.jsx)(w,{data:t})})]})},j=n(8),b=n(9),v=n.n(b),y=function(e){var t=e.side,n=t?Object(j.a)({},"margin".concat(t),"1rem"):{};return Object(h.jsxs)("div",{className:v.a["lds-ring"],style:n,children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})},O=n(10),x=new URL(document.location).searchParams,g=x.get("apiKey"),_=x.get("envId"),m=x.get("tenantId"),C=x.get("flowId"),k=x.get("awsEndpoint");function R(){return H.apply(this,arguments)}function H(){return(H=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(k);case 2:if((t=e.sent).ok){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(18),n(19);var M=function(){var e=c.a.useState(),t=Object(d.a)(e,2),n=t[0],a=t[1],r=c.a.useState(!1),s=Object(d.a)(r,2),o=s[0],l=s[1],f=c.a.useState(!1),w=Object(d.a)(f,2),j=w[0],b=w[1];c.a.useEffect((function(){window.HotGlue&&!window.HotGlue.hasMounted()&&window.HotGlue.mount({api_key:g,env_id:_})}),[window.HotGlue]);var v=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:n=[Object.keys(t[0])],t.forEach((function(e){var t=Object.values(e).map((function(e){return Object(e)===e?JSON.stringify(e):e}));n.push(t)})),a(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c.a.useEffect((function(){n||v()}),[n]);var x=function e(){window.HotGlue&&window.HotGlue.hasMounted()?window.HotGlue.getLinkedFlows(m).then((function(e){e&&e.find((function(e){return e.id===C}))&&b(!0)})):setTimeout((function(){return e()}),1e3)};c.a.useEffect((function(){j||x()}),[j]);var k=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.HotGlue&&window.HotGlue.hasMounted()){e.next=2;break}return e.abrupt("return");case 2:l(!0),window.HotGlue.createJob(C,m).then((function(e){window.swal("Syncing data","Starting a data sync. This may take a few minutes!","success"),window.HotGlue.pollJob(e.s3_root,C,m).then((function(e){var t=e.payload;l(!1),"JOB_COMPLETED"===t.status?(window.swal("Data synced","Contacts data has been synced successfully!","success"),v()):window.swal("Failed to sync","There was an issue syncing the data, please contact support for help.","error")}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0),window.swal("".concat(t.label," linked"),"Woohoo! You've linked a source! Now you can sync your data.","success");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h1",{children:"hotglue Contacts recipe"}),Object(h.jsxs)("p",{children:["This is a React app showing an end-to-end sample of a hotglue-powered CRM (Salesforce, HubSpot, Pipedrive) integration that pulls ",Object(h.jsx)("strong",{children:"Contacts"}),". Follow each step below to see a user experience."]}),Object(h.jsx)("h2",{children:"Connect your data"}),Object(h.jsxs)("p",{children:["Start by connecting a CRM below! ",Object(h.jsx)("a",{href:"#",children:"I don't have a CRM account."})]}),Object(h.jsx)(O.a,{tenant:m,onLink:H}),Object(h.jsx)("h2",{children:"Trigger a job"}),j?Object(h.jsx)("p",{children:"Now that our CRM is linked, the user can sync their data. You can also set a schedule to automatically sync new data."}):Object(h.jsx)("p",{children:"Once you link a CRM, you can sync your data!"}),Object(h.jsx)("div",{className:"button",children:Object(h.jsxs)("a",{style:{color:"#ffffff"},className:"btnForward ".concat(!j&&"disabled"),onClick:k,children:["Sync data",o&&Object(h.jsx)(y,{side:"Left"})]})}),Object(h.jsx)("h2",{children:"Preview your data"}),n?Object(h.jsx)(p,{data:n}):Object(h.jsx)("p",{children:"Once you have connected a CRM and ran a sync, data will appear here!"})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(M,{})}),document.getElementById("root")),S()},9:function(e,t,n){e.exports={"lds-ring":"loading_styles_lds-ring__YRoef"}}},[[20,1,2]]]);
//# sourceMappingURL=main.d70953f4.chunk.js.map